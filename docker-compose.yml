version: '2'
services:
  bayberry:
    image: erikperkins/bayberry
    restart: on-failure
    environment:
      MIX_ENV: prod
      BAYBERRY_SECRET_KEY_BASE: ${BAYBERRY_SECRET_KEY_BASE}
      BAYBERRY_USERNAME: ${BAYBERRY_USERNAME}
      BAYBERRY_PASSWORD: ${BAYBERRY_PASSWORD}
      BAYBERRY_DATABASE: ${BAYBERRY_DATABASE}
      GEOLOCATION_DATABASE: ${GEOLOCATION_DATABASE}
      DATAPUNNET_ADMIN_PASSWORD: ${DATAPUNNET_ADMIN_PASSWORD}
      POSTGRES_HOST: ${POSTGRES_HOST}
      REDIS_HOST: ${REDIS_HOST}
      REDIS_PASSWORD: ${REDIS_PASSWORD}
      RABBITMQ_HOST: ${RABBITMQ_HOST}
      RABBITMQ_USERNAME: ${RABBITMQ_USERNAME}
      RABBITMQ_PASSWORD: ${RABBITMQ_PASSWORD}
      MNIST_ENDPOINT: ${MNIST_ENDPOINT}
      LDA_ENDPOINT: ${LDA_ENDPOINT}
      TIMESERIES_ENDPOINT: ${TIMESERIES_ENDPOINT}
      TWITTER_CONSUMER_KEY: ${TWITTER_CONSUMER_KEY}
      TWITTER_CONSUMER_SECRET: ${TWITTER_CONSUMER_SECRET}
      TWITTER_ACCESS_TOKEN: ${TWITTER_ACCESS_TOKEN}
      TWITTER_ACCESS_SECRET: ${TWITTER_ACCESS_SECRET}
      TWITTER_FEED: ${TWITTER_FEED}
      TWITTER_TIMEOUT: ${TWITTER_TIMEOUT}
    ports:
      - 80:80
